使用到的php语言特性：
1、静态属性：使用static::$macros来访问静态属性 $macros
2、魔术方法：使用__callStatic魔术方法来处理静态方法的调用。
3、异常处理：使用throw关键字抛出异常
4、类型判断：使用Closure类来创建闭包函数。
5、闭包函数： 使用Closure类来创建闭包函数。宏通常以闭包的形式提供，允许封装并延迟执行自定义代码。
6、绑定闭包函数：使用bindTo方法将闭包函数绑定到指定的对象上。
7、可变参数：使用...语法将参数打包成数组，并传递给函数。
8、traits：允许在不同的类中重用其功能而不需要继承。
9、静态属性：使用静态属性$macros来跨实例共享宏定义。
10、闭包Closures：
11、反射：通过ReflectionClass和ReflectionMethod来分析和获取mixin对象方法，从而可以将这些方法作为宏添加到使用macroable的类中。
12、动态绑定：通过Closure::bindTo()方法动态改变闭包的作用域，使得可以在宏内部使用$this来引用调用宏的类实例。

在php中，$this关键字在对象上下文中使用，用于引用当前类的实例。
理解'Macroable' trait和Closure::bindTo()方法的关键在于理解闭包Closure的作用域绑定和php中的宏概念。

闭包：在php中，闭包是一个匿名函数，可以捕获其创建时所在的作用域中的变量。默认情况下，闭包是从全局作用域中创建的，因此它们不具有$this上下文。
$this在面向对象编程中， $this是一个指向当前对象实例的引用。在类的方法中， $this用于访问该类的其他方法和属性。

![[Pasted image 20231122060010.png]]
![[Pasted image 20231122060032.png]]

