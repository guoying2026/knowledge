我们非常关注几个与语法相关和核心功能相关的内容。这些功能是从哪里来的？谁决定将什么添加到语言中或不添加？我之前提到过“内部”组——他们是决策者吗？

确实有一群核心开发人员编写和维护使PHP运行的所有代码。此外，还有扩展开发人员、文档维护人员、发布管理人员和其他PHP项目角色。所有这些人共同组成了决定将什么添加到PHP中的群体。他们是拥有投票权的人。

这些投票权在每个RFC（“请求评论”）的最后使用。

RFC是描述语言的新功能或更改的文件；它会在一段时间内进行讨论（最短为两周），并在最后进行投票。如果RFC获得2/3的赞成票，就被认为是被接受的，并将该功能添加到语言中。

作为示例，这是属性RFC的（缩短版）。您会注意到在此RFC中使用的是旧的属性语法，后来才进行了更改。
![[Pasted image 20231118070020.png]]
  
这个RFC的很大功劳归功于Dmitry Stogov，他之前在属性方面的工作是这个RFC和补丁的基础。

该RFC提议将属性作为一种结构化的、语法化的元数据，用于类、属性、函数、方法、参数和常量的声明。属性允许直接嵌入代码声明中定义配置指令。

其他语言中存在类似的概念，如Java中的注解，C＃、C ++、Rust、Hack中的属性，以及Python和Javascript中的装饰器。

到目前为止，PHP只提供了一种非结构化的元数据形式：文档注释。

但是文档注释只是字符串，为了保留一些结构化信息，各种PHP子社区内发明了基于@的伪语言。

除了用户界面用例之外，引擎和扩展中还有许多用例可以影响编译、诊断、代码生成、运行时行为等。以下是一些示例。

用户空间文档注释解析的广泛使用表明这是社区中非常需要的功能。

![[Pasted image 20231118070243.png]]
![[Pasted image 20231118070301.png]]
  
属性是通过重复使用现有的标记T_SL和T_SR来封装在“<<”和“>>”之间的特殊格式化文本。
  
属性可以应用于语言中的许多事物：
  
函数（包括闭包和短闭包）类（包括匿名类）、接口、特征类常量类属性类方法函数/方法参数。

理论上，每个人都可以提出一个RFC。你不需要拥有投票权。每个用户空间开发者 - 你和我 - 都可以提交一个想法进行讨论。有 一个重要的附注，尽管如此：如果你成功地让一个RFC被接受，它仍然需要一个实现。事实上，在RFC被投票之前有一个可行的实现通常是一个优势。因此，虽然在你的RFC被接受后你可以要求别人来实现你的功能，但能够自己编写代码或与能够在此之前实现更改的人密切合作是一种资产。

在几段描述了RFC过程之后，它可能看起来相当简单和直接。当然，大多数情况下，明智的RFC都会被批准。但也有例外情况，RFC可能变得非常有争议，导致长时间的讨论。一个最近的例子是属性RFC，我之前展示了其中的一部分。最初被接受的RFC已经是添加类似注解行为的PHP的第七次尝试。这些之前的尝试发生在几年之间，最早可以追溯到2010年8月！

  
添加属性花费了十年的时间有几个原因。首先，讨论了属性应该做什么和不应该做什么：它们支持的功能越多，实现就越复杂。还讨论了属性应该是什么样子，应该使用哪种语法。这些问题会延长讨论时间，并导致一些RFC失败。然而，多年来，这个想法可以进一步完善，并且可能需要做出一些妥协。

其中一个妥协是属性的语法，在属性被接受后，还需要两个额外的RFC来决定。有一些选项，比如：@，@@，<<>>，#[]，还有一些其他的选项。最终，选择了#[] 作为最佳选项，因为@不可用，因为它已经是错误消除运算符。经过数月的讨论，最终达成了一致的语法。对于所有选项，都有很多有利和不利的论点。

所有这些讨论都是公开进行的。您可以通过加入内部邮件列表来很好地跟进。有一个名为externals.io的网站，它将邮件公开在网页上，使其更容易阅读。我认为跟进这个列表是一件好事，可以了解一点关于PHP设计过程的知识。  
即使您从未打算为PHP的核心做出贡献，了解您正在使用的工具如何发展以及用户领域开发人员如何在该过程中提供有价值的反馈也是很好的。

在过去的几年里，我们还看到越来越多的核心贡献者倾听用户开发者的意见。有些人坚持认为核心开发者不关心真实的 PHP，但这绝对不再是真实的情况。核心开发者和用户开发者之间在社交媒体、GitHub和内部列表上有很多互动。PHP开发中的几个关键人物积极与用户开发者联系，以更好地了解真实的 PHP 项目所需。

PHP在过去的十年中有改进的空间，但它也在不断成熟。这也体现在内部流程中。

